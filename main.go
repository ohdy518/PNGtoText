package main

import (
	"PNGtoText/common"
	"PNGtoText/elements/locator"
	"PNGtoText/imageHandler"
	"PNGtoText/parser"
	"fmt"
	"os"
)

const DEBUG bool = true

func main() {
	if DEBUG {
		fmt.Println("DEBUGGING")
		debug()
		return
	}

	// Open the PNG file
	file, err := os.Open("./test/redblueflag.png")
	if err != nil {
		panic(err)
		return
	}
	defer func() {
		err = file.Close()
		if err != nil {
			panic(err)
		}
	}()

	imageHandler.SetRGBArrayFromFile(file)

	locator.GetInitTerminalIndex()
	locator.SetITSliceFromITIndex()
	var tempITSlice = locator.ITSlice

	parser.Parse(tempITSlice)
}

func debug() {
	//var r = common.TextToBinaryString("This is a quite long english text. I wonder if this would work like a charm. This sentence exists purely to make this input lengthy. How did I do?")
	var r, err = common.BinaryStringToText("101010001101000011010010111001100100000011010010111001100100000011000010010000001110001011101010110100101110100011001010010000001101100011011110110111001100111001000000110010101101110011001110110110001101001011100110110100000100000011101000110010101111000011101000010111000100000010010010010000001110111011011110110111001100100011001010111001000100000011010010110011000100000011101000110100001101001011100110010000001110111011011110111010101101100011001000010000001110111011011110111001001101011001000000110110001101001011010110110010100100000011000010010000001100011011010000110000101110010011011010010111000100000010101000110100001101001011100110010000001110011011001010110111001110100011001010110111001100011011001010010000001100101011110000110100101110011011101000111001100100000011100000111010101110010011001010110110001111001001000000111010001101111001000000110110101100001011010110110010100100000011101000110100001101001011100110010000001101001011011100111000001110101011101000010000001101100011001010110111001100111011101000110100001111001001011100010000001001000011011110111011100100000011001000110100101100100001000000100100100100000011001000110111100111111")
	if err != nil {
		panic(err)
	}
	fmt.Println(r)
}
